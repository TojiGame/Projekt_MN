#include <iostream>
#include <cmath>

using namespace std;

int main()
{
    int n = 400;
    double tab [n] = {
5.15,53.1033,24.1649,-131.861,-66.088,219.581,166.613,-252.227,-259.057,288.592,408.928,-240.191,-513.587,206.792,676.323,-60.7623,-744.576,-39.7684,878.344,277.416,
4.6637,52.617,23.6786,-132.347,-66.5743,219.095,166.126,-252.714,-259.543,288.106,408.442,-240.677,-514.073,206.305,675.837,-61.2486,-745.062,-40.2547,877.858,276.93,
13.6457,61.599,32.6606,-123.365,-57.5923,228.077,175.108,-243.732,-250.561,297.088,417.424,-231.695,-505.091,215.287,684.819,-52.2666,-736.08,-31.2727,886.84,285.912,
20.0819,68.0352,39.0968,-116.929,-51.1561,234.513,181.544,-237.296,-244.125,303.524,423.86,-225.259,-498.655,221.724,691.255,-45.8304,-729.644,-24.8365,893.276,292.348,
-15.3336,32.6197,3.68134,-152.345,-86.5716,199.097,146.129,-272.711,-279.541,268.108,388.445,-260.674,-534.07,186.308,655.839,-81.2459,-765.06,-60.252,857.861,256.932,
-53.1347,-5.1814,-34.1198,-190.146,-124.373,161.296,108.328,-310.512,-317.342,230.307,350.643,-298.475,-571.871,148.507,618.038,-119.047,-802.861,-98.0532,820.06,219.131,
7.32054,55.2739,26.3355,-129.691,-63.9175,221.752,168.783,-250.057,-256.886,290.762,411.099,-238.02,-511.416,208.962,678.494,-58.5917,-742.406,-37.5979,880.515,279.587,
118.206,166.16,137.221,-18.8049,46.9683,332.637,279.669,-139.171,-146.001,401.648,521.985,-127.134,-400.53,319.848,789.379,52.2941,-631.52,73.2879,991.401,390.472,
71.8237,119.777,90.8386,-65.1875,0.585689,286.255,233.286,-185.554,-192.383,355.266,475.602,-173.517,-446.913,273.465,742.997,5.91143,-677.902,26.9053,945.018,344.09,
-144.626,-96.6727,-125.611,-281.637,-215.864,69.805,16.8366,-402.003,-408.833,138.816,259.152,-389.967,-663.363,57.0157,526.547,-210.538,-894.352,-189.544,728.568,127.64,
-199.47,-151.517,-180.455,-336.482,-270.708,14.9606,-38.0078,-456.848,-463.677,83.9715,204.308,-444.811,-718.207,2.17133,471.703,-265.383,-949.197,-244.389,673.724,72.7957,
94.9224,142.876,113.937,-42.0888,23.6844,309.353,256.385,-162.455,-169.285,378.364,498.701,-150.418,-423.814,296.564,766.095,29.0101,-654.804,50.004,968.117,367.188,
342.54,390.493,361.555,205.529,271.302,556.971,504.003,85.1626,78.333,625.982,746.318,97.1994,-176.197,544.182,1013.71,276.628,-407.186,297.622,1215.73,614.806,
66.0565,114.01,85.0715,-70.9547,-5.1815,280.487,227.519,-191.321,-198.151,349.498,469.835,-179.284,-452.68,267.698,737.23,0.144239,-683.67,21.1381,939.251,338.323,
-434.431,-386.478,-415.416,-571.443,-505.669,-220,-272.969,-691.809,-698.638,-150.99,-30.6532,-679.772,-953.168,-232.79,236.742,-500.344,-1184.16,-479.35,438.763,-162.165,
-349.239,-301.286,-330.224,-486.251,-420.477,-134.808,-187.777,-606.617,-613.446,-65.7975,54.5388,-594.58,-867.976,-147.598,321.934,-415.152,-1098.97,-394.158,523.955,-76.9733,
354.225,402.178,373.24,217.214,282.987,568.656,515.687,96.8473,90.0178,637.667,758.003,108.884,-164.512,555.867,1025.4,288.312,-395.501,309.306,1227.42,626.491,
634.369,682.322,653.384,497.358,563.131,848.8,795.832,376.992,370.162,917.811,1038.15,389.028,115.633,836.011,1305.54,568.457,-115.357,589.451,1507.56,906.635,
-108.889,-60.936,-89.8744,-245.901,-180.127,105.542,52.5732,-366.267,-373.096,174.553,294.889,-354.23,-627.626,92.7524,562.284,-174.802,-858.615,-153.808,764.305,163.377,
-876.614,-828.661,-857.599,-1013.63,-947.852,-662.183,-715.151,-1133.99,-1140.82,-593.172,-472.836,-1121.95,-1395.35,-674.972,-205.441,-942.526,-1626.34,-921.532,-3.41976,-604.348
};
double var = tab[0];
for(int j = 0; j < n; j++){
        var = tab[0];
    for(int i = 1; i < n; i++)
    {
        if(var > tab[i])
        {
            tab[i-1] = tab[i];
            tab[i] = var;
        }
        else if(var < tab[i])
        {
            var = tab[i];
        }
    }
}
//for(int i = 0; i < n; i++)
//{
//    cout << "x" << i << " = " << tab[i] << endl;
//}
double mediana = 0;
int srodek = n/2;
if(srodek % 2 == 0)
{
    mediana = (tab[srodek] + tab[srodek-1])/2;
}
else
{
    mediana = tab[srodek+1];
}
cout << "mediana = " << mediana << endl;
double sumaS = 0;
double srednia = 0;
for(int i = 0; i < n; i++)
{
    sumaS += tab[i];
}
srednia = sumaS/n;
cout << "srednia = " << srednia << endl;
double sumaO = 0;
double odchylenie = 0;
for(int i = 0; i < n; i++)
{
    sumaO += (tab[i] - srednia)*(tab[i] - srednia);
}
odchylenie = sqrt(sumaO/n);
cout << "odchylenie = " << odchylenie << endl;

const int m = 20;
double tabx [m][m] = {
{5.15,53.1033,24.1649,-131.861,-66.088,219.581,166.613,-252.227,-259.057,288.592,408.928,-240.191,-513.587,206.792,676.323,-60.7623,-744.576,-39.7684,878.344,277.416},
{4.6637,52.617,23.6786,-132.347,-66.5743,219.095,166.126,-252.714,-259.543,288.106,408.442,-240.677,-514.073,206.305,675.837,-61.2486,-745.062,-40.2547,877.858,276.93},
{13.6457,61.599,32.6606,-123.365,-57.5923,228.077,175.108,-243.732,-250.561,297.088,417.424,-231.695,-505.091,215.287,684.819,-52.2666,-736.08,-31.2727,886.84,285.912},
{20.0819,68.0352,39.0968,-116.929,-51.1561,234.513,181.544,-237.296,-244.125,303.524,423.86,-225.259,-498.655,221.724,691.255,-45.8304,-729.644,-24.8365,893.276,292.348},
{-15.3336,32.6197,3.68134,-152.345,-86.5716,199.097,146.129,-272.711,-279.541,268.108,388.445,-260.674,-534.07,186.308,655.839,-81.2459,-765.06,-60.252,857.861,256.932},
{-53.1347,-5.1814,-34.1198,-190.146,-124.373,161.296,108.328,-310.512,-317.342,230.307,350.643,-298.475,-571.871,148.507,618.038,-119.047,-802.861,-98.0532,820.06,219.131},
{7.32054,55.2739,26.3355,-129.691,-63.9175,221.752,168.783,-250.057,-256.886,290.762,411.099,-238.02,-511.416,208.962,678.494,-58.5917,-742.406,-37.5979,880.515,279.587},
{118.206,166.16,137.221,-18.8049,46.9683,332.637,279.669,-139.171,-146.001,401.648,521.985,-127.134,-400.53,319.848,789.379,52.2941,-631.52,73.2879,991.401,390.472},
{71.8237,119.777,90.8386,-65.1875,0.585689,286.255,233.286,-185.554,-192.383,355.266,475.602,-173.517,-446.913,273.465,742.997,5.91143,-677.902,26.9053,945.018,344.09},
{-144.626,-96.6727,-125.611,-281.637,-215.864,69.805,16.8366,-402.003,-408.833,138.816,259.152,-389.967,-663.363,57.0157,526.547,-210.538,-894.352,-189.544,728.568,127.64},
{-199.47,-151.517,-180.455,-336.482,-270.708,14.9606,-38.0078,-456.848,-463.677,83.9715,204.308,-444.811,-718.207,2.17133,471.703,-265.383,-949.197,-244.389,673.724,72.7957},
{94.9224,142.876,113.937,-42.0888,23.6844,309.353,256.385,-162.455,-169.285,378.364,498.701,-150.418,-423.814,296.564,766.095,29.0101,-654.804,50.004,968.117,367.188},
{342.54,390.493,361.555,205.529,271.302,556.971,504.003,85.1626,78.333,625.982,746.318,97.1994,-176.197,544.182,1013.71,276.628,-407.186,297.622,1215.73,614.806},
{66.0565,114.01,85.0715,-70.9547,-5.1815,280.487,227.519,-191.321,-198.151,349.498,469.835,-179.284,-452.68,267.698,737.23,0.144239,-683.67,21.1381,939.251,338.323},
{-434.431,-386.478,-415.416,-571.443,-505.669,-220,-272.969,-691.809,-698.638,-150.99,-30.6532,-679.772,-953.168,-232.79,236.742,-500.344,-1184.16,-479.35,438.763,-162.165},
{-349.239,-301.286,-330.224,-486.251,-420.477,-134.808,-187.777,-606.617,-613.446,-65.7975,54.5388,-594.58,-867.976,-147.598,321.934,-415.152,-1098.97,-394.158,523.955,-76.9733},
{354.225,402.178,373.24,217.214,282.987,568.656,515.687,96.8473,90.0178,637.667,758.003,108.884,-164.512,555.867,1025.4,288.312,-395.501,309.306,1227.42,626.491},
{634.369,682.322,653.384,497.358,563.131,848.8,795.832,376.992,370.162,917.811,1038.15,389.028,115.633,836.011,1305.54,568.457,-115.357,589.451,1507.56,906.635},
{-108.889,-60.936,-89.8744,-245.901,-180.127,105.542,52.5732,-366.267,-373.096,174.553,294.889,-354.23,-627.626,92.7524,562.284,-174.802,-858.615,-153.808,764.305,163.377},
{-876.614,-828.661,-857.599,-1013.63,-947.852,-662.183,-715.151,-1133.99,-1140.82,-593.172,-472.836,-1121.95,-1395.35,-674.972,-205.441,-942.526,-1626.34,-921.532,-3.41976,-604.348}
};
int z = 2;
long double X[m] = {71.8237,119.777,90.8386,-65.1875,0.585689,286.255,233.286,-185.554,-192.383,355.266,475.602,-173.517,-446.913,273.465,742.997,5.91143,-677.902,26.9053,945.018,344.09};
long double Y[m] = {0,0.0526316,0.105263,0.157895,0.210526,0.263158,0.315789,0.368421,0.421053,0.473684,0.526316,0.578947,0.631579,0.684211,0.736842,0.789474,0.842105,0.894737,0.947368,1};
long double B[z][z+1];
long double p[z][1];
long double suma_x = 0;
    long double suma_x2 = 0;
    long double suma_y = 0;
    long double suma_xy = 0;
    B[0][0]= m;
    for(int i = 0; i < m; i++)
    {
        suma_x += X[i];
        suma_y += Y[i];
        suma_x2 = suma_x2 + (X[i]*X[i]);
        suma_xy += X[i]*Y[i];
    }
    B[0][1] = suma_x;
    B[1][0] = suma_x;
    B[1][1] = suma_x2;
    B[0][2] = suma_y;
    B[1][2] = suma_xy;
//    for(int i = 0; i <= 1; i++)
//    {
//        for(int j = 0; j <= 2; j++)
//        {
//            cout << B[i][j] << "\t";
//        }
//        cout << endl;
//    }
for(int s = 0; s <= z-1 ; s++)
    {
        for(int i = s+1; i < z; i++)
        {
            for(int j = s+1; j <= z+1; j++)
            {
                B[i][j]=B[i][j] - B[i][s]/B[s][s] * B[s][j];
            }
        }
    }

    p[z-1][0] = B[z-1][z]/B[z-1][z-1];

    for(int i = z - 2; i >= 0; i--){
		double suma = 0.0;
		for(int s = i + 1; s < z; s++){
			suma += B[i][s] * p[s][0];
		}
		p[i][0] = (B[i][z] - suma) / B[i][i];
	}

    for(int i = 0; i < z; i++)
    {
        cout << "p"<< i << " = " << p[i][0] <<endl;
    }
    double funkcja = 0;
    for(int i = 0; i < m; i++)
    {
        funkcja = i*p[0][0] + p[1][0];
        cout << /*"x" << i << " = " <<*/ funkcja << endl;
    }
    return 0;
}
